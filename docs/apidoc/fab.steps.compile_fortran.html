
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>fab.steps.compile_fortran module &#8212; fab 1.0.dev0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fab.steps.find_source_files module" href="fab.steps.find_source_files.html" />
    <link rel="prev" title="fab.steps.compile_c module" href="fab.steps.compile_c.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#apidoc/fab.steps.compile_fortran" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="fab 1.0.dev0 documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">fab 1.0.dev0 documentation</span>
          <span class="md-header-nav__topic"> fab.steps.compile_fortran module </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">fab 1.0.dev0 documentation</a></li>
          <li class="md-tabs__item"><a href="modules.html" class="md-tabs__link">fab</a></li>
          <li class="md-tabs__item"><a href="fab.html" class="md-tabs__link">fab package</a></li>
          <li class="md-tabs__item"><a href="fab.steps.html" class="md-tabs__link">fab.steps package</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="fab 1.0.dev0 documentation" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="fab 1.0.dev0 documentation">fab 1.0.dev0 documentation</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Contents:</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../install.html" class="md-nav__link">Installing Fab</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../environment.html" class="md-nav__link">Environment</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../config_intro.html" class="md-nav__link">Introduction to Configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../writing_config.html" class="md-nav__link">How to Write a Build Config</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../advanced_config.html" class="md-nav__link">Advanced Configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../features.html" class="md-nav__link">Features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="modules.html" class="md-nav__link">Api Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../development.html" class="md-nav__link">Developer’s guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../glossary.html" class="md-nav__link">Glossary</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genindex.html" class="md-nav__link">Index</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../py-modindex.html" class="md-nav__link">Python Module Index</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#apidoc-fab-steps-compile-fortran--page-root" class="md-nav__link">fab.steps.compile_fortran module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.config" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.config</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.flags" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.flags</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.compiler" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.compiler</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.compiler_version" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.compiler_version</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.mod_hashes" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.mod_hashes</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.two_stage_flag" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.two_stage_flag</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.MpCommonArgs.stage" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">MpCommonArgs.stage</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.compile_fortran" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">compile_fortran()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.handle_compiler_args" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">handle_compiler_args()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.compile_pass" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">compile_pass()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.get_compile_next" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_compile_next()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.store_artefacts" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">store_artefacts()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.process_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">process_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.compile_file" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">compile_file()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.get_fortran_compiler" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_fortran_compiler()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#fab.steps.compile_fortran.get_mod_hashes" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">get_mod_hashes()</span></code></a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/apidoc/fab.steps.compile_fortran.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="module-fab.steps.compile_fortran">
<span id="fab-steps-compile-fortran-module"></span><h1 id="apidoc-fab-steps-compile-fortran--page-root">fab.steps.compile_fortran module<a class="headerlink" href="#apidoc-fab-steps-compile-fortran--page-root" title="Permalink to this heading">¶</a></h1>
<p>Fortran file compilation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">MpCommonArgs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compiler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compiler_version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod_hashes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">two_stage_flag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Arguments to be passed into the multiprocessing function, alongside the filenames.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="fab.build_config.html#fab.build_config.BuildConfig" title="fab.build_config.BuildConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildConfig</span></code></a></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.flags">
<span class="sig-name descname"><span class="pre">flags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="fab.build_config.html#fab.build_config.FlagsConfig" title="fab.build_config.FlagsConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlagsConfig</span></code></a></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.flags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.compiler">
<span class="sig-name descname"><span class="pre">compiler</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.compiler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.compiler_version">
<span class="sig-name descname"><span class="pre">compiler_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.compiler_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.mod_hashes">
<span class="sig-name descname"><span class="pre">mod_hashes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.mod_hashes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.two_stage_flag">
<span class="sig-name descname"><span class="pre">two_stage_flag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.two_stage_flag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.MpCommonArgs.stage">
<span class="sig-name descname"><span class="pre">stage</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#fab.steps.compile_fortran.MpCommonArgs.stage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.compile_fortran">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">compile_fortran</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.compile_fortran" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles all Fortran files in all build trees, creating/extending a set of compiled files for each build target.</p>
<p>Files are compiled in multiple passes, with each pass enabling further files to be compiled in the next pass.</p>
<p>Uses multiprocessing, unless disabled in the config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="fab.build_config.html#fab.build_config.BuildConfig" title="fab.build_config.BuildConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildConfig</span></code></a>) – The <a class="reference internal" href="fab.build_config.html#fab.build_config.BuildConfig" title="fab.build_config.BuildConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">fab.build_config.BuildConfig</span></code></a> object where we can read settings
such as the project workspace folder or the multiprocessing flag.</p></li>
<li><p><strong>common_flags</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
A list of strings to be included in the command line call, for all files.</p></li>
<li><p><strong>path_flags</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>]) – (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
A list of <a class="reference internal" href="fab.build_config.html#fab.build_config.AddFlags" title="fab.build_config.AddFlags"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddFlags</span></code></a>, defining flags to be included in the command line call
for selected files.</p></li>
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="fab.artefacts.html#fab.artefacts.ArtefactsGetter" title="fab.artefacts.ArtefactsGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArtefactsGetter</span></code></a>]) – (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
An <a class="reference internal" href="fab.artefacts.html#fab.artefacts.ArtefactsGetter" title="fab.artefacts.ArtefactsGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArtefactsGetter</span></code></a> which give us our c files to process.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.handle_compiler_args">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">handle_compiler_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">common_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.handle_compiler_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.compile_pass">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">compile_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compiled</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncompiled</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_common_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod_hashes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.compile_pass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.get_compile_next">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">get_compile_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compiled</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncompiled</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.get_compile_next" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference internal" href="fab.parse.fortran.html#fab.parse.fortran.AnalysedFortran" title="fab.parse.fortran.AnalysedFortran"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysedFortran</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.store_artefacts">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">store_artefacts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compiled_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_lists</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">artefact_store</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.store_artefacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Create our artefact collection; object files for each compiled file, per root symbol.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.process_file">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">process_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.process_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare to compile a fortran file, and compile it if anything has changed since it was last compiled.</p>
<p>Object files are created directly as artefacts in the prebuild folder.
Mod files are created in the module folder and copied as artefacts into the prebuild folder.
If nothing has changed, prebuilt mod files are copied <em>from</em> the prebuild folder into the module folder.
:rtype: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference internal" href="fab.util.html#fab.util.CompiledFile" title="fab.util.CompiledFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompiledFile</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>]], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]]</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prebuild filenames include a “combo-hash” of everything that, if changed, must trigger a recompile.
For mod and object files, this includes a checksum of: <em>source code, compiler</em>.
For object files, this also includes a checksum of: <em>compiler flags, modules on which we depend</em>.</p>
<p>Before compiling a file, we calculate the combo hashes and see if the output files already exists.</p>
</div>
<p>Returns a compilation result, regardless of whether it was compiled or prebuilt.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.compile_file">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">compile_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysed_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_common_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.compile_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the compiler.</p>
<p>The current working folder for the command is set to the folder where the source file lives.
This is done to stop the compiler inserting folder information into the mod files,
which would cause them to have different checksums depending on where they live.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.get_fortran_compiler">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">get_fortran_compiler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compiler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.get_fortran_compiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fortran compiler specified by the <cite>$FC</cite> environment variable,
or overridden by the optional <cite>compiler</cite> argument.</p>
<p>Separates the tool and flags for the sort of value we see in environment variables, e.g. <cite>gfortran -c</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>compiler</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
Use this string instead of the $FC environment variable.</p>
</dd>
</dl>
<p>Returns the tool and a list of flags.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="fab.steps.compile_fortran.get_mod_hashes">
<span class="sig-prename descclassname"><span class="pre">fab.steps.compile_fortran.</span></span><span class="sig-name descname"><span class="pre">get_mod_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysed_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fab.steps.compile_fortran.get_mod_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash of every module file defined in the list of analysed files.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="fab.steps.compile_c.html" title="fab.steps.compile_c module"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> fab.steps.compile_c module </span>
              </div>
            </a>
          
          
            <a href="fab.steps.find_source_files.html" title="fab.steps.find_source_files module"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> fab.steps.find_source_files module </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2023.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>